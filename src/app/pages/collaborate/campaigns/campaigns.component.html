<div class="row">
	<div class="col-6 card-campaigns">
        <app-card cardTitle="Campaigns" #cardTeams cardClass="card-datatable" [options]="false">
            <div class="campaign-filter">
                <div class="position-relative">
                    <div class="btn-group dropdown" ngbDropdown placement="auto">
                        <button class="btn btn-outline-primary  btn-normal-padding" ngbDropdownToggle type="button">{{getFilterLabel()}}</button>
                        <div ngbDropdownMenu>
                            <a *ngFor="let filter of campaignFilter" class="dropdown-item" (click)="onClickFilterInCampaigns(filter.value)">{{filter.label}}</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="table-responsive margin-top-up-10">
                <ngb-tabset>
                    <ngb-tab title="In Progress">
                        <ng-template ngbTabContent>
                            <table #campaignsTable class="table table-striped table-hover">
                                <thead class="campaign-table-header">
                                    <th>Campaign Name</th>
                                    <th>Assigned Team</th>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                    <th>Progress</th>
                                    <th>Type</th>
                                    <th>Status</th>
                                </thead>
                                <tbody class="campaign-table-body">
                                    <tr *ngFor="let campaign of filteredCampaignsInProgress" (click)="onClickCampaign(campaign.id)" [ngClass]="{'selected': campaign.id === selectedCampaignId}">
                                        <td>{{campaign.name}}</td>
                                        <td *ngIf="campaign.team_id > 0"><a href='javascript:' (click)="onClickChangeTeam(campaign.id)">{{getTeamName(campaign.team_id)}}</a></td>
                                        <td *ngIf="campaign.team_id === 0"><button class="btn btn-outline-primary btn-normal-padding"  (click)="onClickAssignTeam(campaign.id)">Assign Team</button></td>
                                        <td>{{campaign.start_date.substring(0, 11)}}</td>
                                        <td>{{campaign.end_date.substring(0, 11)}}</td>
                                        <td>
                                            <ngb-progressbar height="20px" [value]="campaign.percent"></ngb-progressbar>
                                        </td>
                                        <td>{{campaign.type}}</td>
                                        <td>{{campaign.status}}</td>
                                    </tr>
                                    <tr *ngIf="filteredCampaignsInProgress.length === 0">
                                        <td colspan=7 align="center"> No data available in table.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </ng-template>
                    </ngb-tab>

                    <ngb-tab title="Archived">
                        <ng-template ngbTabContent>
                            <table #campaignsTable class="table table-striped table-hover">
                                <thead class="campaign-table-header">
                                    <th>Campaign Name</th>
                                    <th>Assigned Team</th>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                    <th>Progress</th>
                                    <th>Type</th>
                                    <th>Status</th>
                                </thead>
                                <tbody class="campaign-table-body">
                                    <tr *ngFor="let campaign of filteredCampaignsInArchived" [id]="campaign.id">
                                        <td>{{campaign.name}}</td>
                                        <td *ngIf="campaign.team_id > 0">{{getTeamName(campaign.team_id)}}</td>
                                        <td *ngIf="campaign.team_id === 0">---</td>
                                        <td>{{campaign.start_date.substring(0, 11)}}</td>
                                        <td>{{campaign.end_date.substring(0, 11)}}</td>
                                        <td>
                                            <ngb-progressbar height="20px" [value]="campaign.percent"></ngb-progressbar>
                                        </td>
                                        <td>{{campaign.type}}</td>
                                        <td>{{campaign.status}}</td>
                                    </tr>
                                    <tr *ngIf="filteredCampaignsInArchived.length === 0">
                                        <td align="center" colspan=7> No data available in table.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </ng-template>
                    </ngb-tab>
                </ngb-tabset>
                
            </div>
        </app-card>
    </div>
    <div class="col-6 card-tasks">
        <app-card cardTitle="Tasks" #cardSubtasks [cardButtons]="cardButtonsInTasks" [options]="false">
			<div class="table-responsive">
				<table #subTaskTable class="table table-striped table-hover">
					<thead class="subtask-table-header">
						<th>Task Name</th>
						<th>Description</th>
						<th>Start Date</th>
						<th>End Date</th>
						<th>Progress</th>
						<th>Est.</th>
						<th>Member</th>
					</thead>
					<tbody class="subtask-table-body">
						
					</tbody>
				</table>
			</div>
		</app-card>
    </div>
</div>

<app-ui-modal #assignTeamModal dialogClass="modal-dialog-centered modal-assign-team">
	<div class="app-modal-header">
		<h5 class="modal-title">{{replaceTeam ? 'Replace Team': 'Assign Team'}}</h5>
		<button type="button" class="close basic-close" data-dismiss="modal" aria-label="Close" (click)="assignTeamModal.hide()">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>

	<div class="app-modal-body">
        <div class="row" *ngIf="replaceTeam">
            <div class="col-md-12">
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Current Team</span>
                    </div>
                    <input type="text" class="form-control" id="team_name" placeholder="Team name" [value] = "getCurrentTeamName()" readonly>
                </div>
            </div>
        </div>
        <div class="row" [ngClass]="{'mt-4': replaceTeam}">
            <div class="col-md-12">
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">New Team</span>
                    </div>
                    <ng-select [ngClass]="'ng-select'" [options]="getExistingTeam()"></ng-select>
                </div>
            </div>
        </div>
	</div>

	<div class="app-modal-footer">
		<button type="button" class="btn btn-primary">Assign</button> &nbsp;
		<button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="assignTeamModal.hide()">Close</button>
	</div>
</app-ui-modal>